{"diffoscope-json-version": 1, "source1": "first/FileHandler.class", "source2": "second/FileHandler.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -27,14 +27,18 @@\n     private static final String FILE_SCHEME = \"file:\";\n     private static final String FILE_SCHEME_SLASH = \"file://\";\n     private static final SynchronizerSupport DUMMY_SYNC_SUPPORT;\n     private final FileBased content;\n     private final AtomicReference<FileLocator> fileLocator;\n     private final List<FileHandlerListener> listeners;\n     \n+    static {\n+        DUMMY_SYNC_SUPPORT = (SynchronizerSupport)new FileHandler.FileHandler$1();\n+    }\n+    \n     public FileHandler() {\n         this(null);\n     }\n     \n     public FileHandler(final FileBased obj) {\n         this(obj, emptyFileLocator());\n     }\n@@ -107,15 +111,15 @@\n     \n     private FileLocator checkContentAndGetLocator() throws ConfigurationException {\n         this.checkContent();\n         return this.getFileLocator();\n     }\n     \n     public void clearLocation() {\n-        new FileHandler.FileHandler$2(this).update();\n+        new FileHandler.FileHandler$2(this, this).update();\n     }\n     \n     private FileLocator createLocatorWithFileName(final String fileName, final FileLocator locator) {\n         return FileLocatorUtils.fileLocator(locator).sourceURL((URL)null).fileName(fileName).create();\n     }\n     \n     private SynchronizerSupport fetchSynchronizerSupport() {\n@@ -228,15 +232,15 @@\n     }\n     \n     public void load(final File file) throws ConfigurationException {\n         URL url;\n         try {\n             url = FileLocatorUtils.toURL(file);\n         }\n-        catch (final MalformedURLException e1) {\n+        catch (final MalformedURLException ex) {\n             throw new ConfigurationException(\"Cannot create URL from file \" + file);\n         }\n         this.load(url);\n     }\n     \n     private void load(final FileLocator locator) throws ConfigurationException {\n         this.load(FileLocatorUtils.locateOrThrow(locator), locator);\n@@ -287,27 +291,29 @@\n         }\n         catch (final Exception e2) {\n             throw new ConfigurationException(\"Unable to load the configuration from the URL \" + url, (Throwable)e2);\n         }\n         finally {\n             closeSilent(in);\n         }\n+        closeSilent(in);\n     }\n     \n     private void loadFromReader(final Reader in) throws ConfigurationException {\n         this.fireLoadingEvent();\n         try {\n             this.getContent().read(in);\n         }\n         catch (final IOException ioex) {\n             throw new ConfigurationException((Throwable)ioex);\n         }\n         finally {\n             this.fireLoadedEvent();\n         }\n+        this.fireLoadedEvent();\n     }\n     \n     private void loadFromStream(final InputStream in, final String encoding, final URL url) throws ConfigurationException {\n         this.checkContent();\n         final SynchronizerSupport syncSupport = this.fetchSynchronizerSupport();\n         syncSupport.lock(LockMode.WRITE);\n         try {\n@@ -318,14 +324,15 @@\n             else {\n                 this.loadFromTransformedStream(in, encoding);\n             }\n         }\n         finally {\n             syncSupport.unlock(LockMode.WRITE);\n         }\n+        syncSupport.unlock(LockMode.WRITE);\n     }\n     \n     private void loadFromStreamDirectly(final InputStream in) throws ConfigurationException {\n         try {\n             ((InputStreamSupport)this.getContent()).read(in);\n         }\n         catch (final IOException e) {\n@@ -395,14 +402,15 @@\n         }\n         catch (final MalformedURLException muex) {\n             throw new ConfigurationException((Throwable)muex);\n         }\n         finally {\n             closeSilent(out);\n         }\n+        closeSilent(out);\n     }\n     \n     private void save(final FileLocator locator) throws ConfigurationException {\n         if (!FileLocatorUtils.isLocationDefined(locator)) {\n             throw new ConfigurationException(\"No file location has been set!\");\n         }\n         if (locator.getSourceURL() != null) {\n@@ -460,14 +468,15 @@\n                     throw new ConfigurationException((Throwable)e);\n                 }\n             }\n         }\n         finally {\n             closeSilent(out);\n         }\n+        closeSilent(out);\n     }\n     \n     public void save(final Writer out) throws ConfigurationException {\n         this.checkContent();\n         this.injectNullFileLocator();\n         this.saveToWriter(out);\n     }\n@@ -491,74 +500,72 @@\n                 writer = new OutputStreamWriter(out);\n             }\n             this.saveToWriter(writer);\n         }\n         finally {\n             syncSupport.unlock(LockMode.WRITE);\n         }\n+        syncSupport.unlock(LockMode.WRITE);\n     }\n     \n     private void saveToWriter(final Writer out) throws ConfigurationException {\n         this.fireSavingEvent();\n         try {\n             this.getContent().write(out);\n         }\n         catch (final IOException ioex) {\n             throw new ConfigurationException((Throwable)ioex);\n         }\n         finally {\n             this.fireSavedEvent();\n         }\n+        this.fireSavedEvent();\n     }\n     \n     public void setBasePath(final String basePath) {\n         final String path = normalizeFileURL(basePath);\n-        new FileHandler.FileHandler$3(this, path).update();\n+        new FileHandler.FileHandler$3(this, this, path).update();\n     }\n     \n     public void setEncoding(final String encoding) {\n-        new FileHandler.FileHandler$4(this, encoding).update();\n+        new FileHandler.FileHandler$4(this, this, encoding).update();\n     }\n     \n     public void setFile(final File file) {\n         final String fileName = file.getName();\n         final String basePath = (file.getParentFile() != null) ? file.getParentFile().getAbsolutePath() : null;\n-        new FileHandler.FileHandler$5(this, fileName, basePath).update();\n+        new FileHandler.FileHandler$5(this, this, fileName, basePath).update();\n     }\n     \n     public void setFileLocator(final FileLocator locator) {\n         if (locator == null) {\n             throw new IllegalArgumentException(\"FileLocator must not be null!\");\n         }\n         this.fileLocator.set(locator);\n         this.fireLocationChangedEvent();\n     }\n     \n     public void setFileName(final String fileName) {\n         final String name = normalizeFileURL(fileName);\n-        new FileHandler.FileHandler$6(this, name).update();\n+        new FileHandler.FileHandler$6(this, this, name).update();\n     }\n     \n     public void setFileSystem(final FileSystem fileSystem) {\n-        new FileHandler.FileHandler$7(this, fileSystem).update();\n+        new FileHandler.FileHandler$7(this, this, fileSystem).update();\n     }\n     \n     public void setLocationStrategy(final FileLocationStrategy strategy) {\n-        new FileHandler.FileHandler$8(this, strategy).update();\n+        new FileHandler.FileHandler$8(this, this, strategy).update();\n     }\n     \n     public void setPath(final String path) {\n         this.setFile(new File(path));\n     }\n     \n     public void setURL(final URL url) {\n         this.setURL(url, URLConnectionOptions.DEFAULT);\n     }\n     \n     public void setURL(final URL url, final URLConnectionOptions urlConnectionOptions) {\n-        new FileHandler.FileHandler$9(this, url, urlConnectionOptions).update();\n-    }\n-    \n-    static {\n-        DUMMY_SYNC_SUPPORT = (SynchronizerSupport)new FileHandler.FileHandler$1();\n+        new FileHandler.FileHandler$9(this, this, url, urlConnectionOptions).update();\n     }\n }\n"}]}
