{"diffoscope-json-version": 1, "source1": "first/FramedSnappyCompressorInputStream.class", "source2": "second/FramedSnappyCompressorInputStream.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -33,14 +33,18 @@\n     private boolean inUncompressedChunk;\n     private int uncompressedBytesRemaining;\n     private long expectedChecksum;\n     private final int blockSize;\n     private final PureJavaCrc32C checksum;\n     private final ByteUtils.ByteSupplier supplier;\n     \n+    static {\n+        SZ_SIGNATURE = new byte[] { -1, 6, 0, 0, 115, 78, 97, 80, 112, 89 };\n+    }\n+    \n     public FramedSnappyCompressorInputStream(final InputStream in) throws IOException {\n         this(in, FramedSnappyDialect.STANDARD);\n     }\n     \n     public FramedSnappyCompressorInputStream(final InputStream in, final FramedSnappyDialect dialect) throws IOException {\n         this(in, 32768, dialect);\n     }\n@@ -72,14 +76,15 @@\n                 this.currentCompressedChunk.close();\n                 this.currentCompressedChunk = null;\n             }\n         }\n         finally {\n             this.inputStream.close();\n         }\n+        this.inputStream.close();\n     }\n     \n     public int read(final byte[] b, final int off, final int len) throws IOException {\n         if (len == 0) {\n             return 0;\n         }\n         int read = this.readOnce(b, off, len);\n@@ -153,15 +158,15 @@\n         }\n         else if (type == 254 || (type > 127 && type <= 253)) {\n             this.skipBlock();\n             this.readNextBlock();\n         }\n         else {\n             if (type >= 2 && type <= 127) {\n-                throw new IOException(\"Unskippable chunk with type \" + type + \" (hex \" + Integer.toHexString(type) + \") detected.\");\n+                throw new IOException(\"Unskippable chunk with type \" + type + \" (hex \" + Integer.toHexString(type) + \")\" + \" detected.\");\n             }\n             if (type == 1) {\n                 this.inUncompressedChunk = true;\n                 this.uncompressedBytesRemaining = this.readSize() - 4;\n                 if (this.uncompressedBytesRemaining < 0) {\n                     throw new IOException(\"Found illegal chunk with negative size\");\n                 }\n@@ -253,12 +258,8 @@\n         byte[] shortenedSig = signature;\n         if (signature.length > FramedSnappyCompressorInputStream.SZ_SIGNATURE.length) {\n             shortenedSig = new byte[FramedSnappyCompressorInputStream.SZ_SIGNATURE.length];\n             System.arraycopy(signature, 0, shortenedSig, 0, FramedSnappyCompressorInputStream.SZ_SIGNATURE.length);\n         }\n         return Arrays.equals(shortenedSig, FramedSnappyCompressorInputStream.SZ_SIGNATURE);\n     }\n-    \n-    static {\n-        SZ_SIGNATURE = new byte[] { -1, 6, 0, 0, 115, 78, 97, 80, 112, 89 };\n-    }\n }\n"}]}
