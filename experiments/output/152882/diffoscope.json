{"diffoscope-json-version": 1, "source1": "first/ReversedLinesFileReader.class", "source2": "second/ReversedLinesFileReader.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -1,25 +1,25 @@\n \n package org.apache.commons.io.input;\n \n-import org.apache.commons.io.FileSystem;\n import java.util.Collections;\n import java.util.ArrayList;\n import java.util.List;\n import java.nio.charset.CharsetEncoder;\n import java.nio.file.Files;\n import java.nio.file.StandardOpenOption;\n import java.nio.file.OpenOption;\n import org.apache.commons.io.StandardLineSeparator;\n import java.io.UnsupportedEncodingException;\n import java.nio.charset.StandardCharsets;\n import org.apache.commons.io.Charsets;\n import java.nio.file.Path;\n import java.io.IOException;\n import java.io.File;\n+import org.apache.commons.io.FileSystem;\n import java.nio.channels.SeekableByteChannel;\n import java.nio.charset.Charset;\n import java.io.Closeable;\n \n public class ReversedLinesFileReader implements Closeable\n {\n     private static final String EMPTY_STRING = \"\";\n@@ -31,14 +31,18 @@\n     private final long totalBlockCount;\n     private final byte[][] newLineSequences;\n     private final int avoidNewlineSplitBufferSize;\n     private final int byteDecrement;\n     private ReversedLinesFileReader.FilePart currentFilePart;\n     private boolean trailingNewlineOfFileSkipped;\n     \n+    static {\n+        DEFAULT_BLOCK_SIZE = FileSystem.getCurrent().getBlockSize();\n+    }\n+    \n     public static ReversedLinesFileReader.Builder builder() {\n         return new ReversedLinesFileReader.Builder();\n     }\n     \n     @Deprecated\n     public ReversedLinesFileReader(final File file) throws IOException {\n         this(file, ReversedLinesFileReader.DEFAULT_BLOCK_SIZE, Charset.defaultCharset());\n@@ -79,15 +83,15 @@\n         else if (this.charset == StandardCharsets.UTF_16BE || this.charset == StandardCharsets.UTF_16LE) {\n             this.byteDecrement = 2;\n         }\n         else {\n             if (this.charset == StandardCharsets.UTF_16) {\n                 throw new UnsupportedEncodingException(\"For UTF-16, you need to specify the byte order (use UTF-16BE or UTF-16LE)\");\n             }\n-            throw new UnsupportedEncodingException(\"Encoding \" + charset + \" is not supported yet (feel free to submit a patch)\");\n+            throw new UnsupportedEncodingException(\"Encoding \" + charset + \" is not supported yet (feel free to \" + \"submit a patch)\");\n         }\n         this.newLineSequences = new byte[][] { StandardLineSeparator.CRLF.getBytes(this.charset), StandardLineSeparator.LF.getBytes(this.charset), StandardLineSeparator.CR.getBytes(this.charset) };\n         this.avoidNewlineSplitBufferSize = this.newLineSequences[0].length;\n         this.channel = Files.newByteChannel(file, StandardOpenOption.READ);\n         this.totalByteLength = this.channel.size();\n         int lastBlockLength = (int)(this.totalByteLength % blockSize);\n         if (lastBlockLength > 0) {\n@@ -95,31 +99,31 @@\n         }\n         else {\n             this.totalBlockCount = this.totalByteLength / blockSize;\n             if (this.totalByteLength > 0L) {\n                 lastBlockLength = blockSize;\n             }\n         }\n-        this.currentFilePart = new ReversedLinesFileReader.FilePart(this, this.totalBlockCount, lastBlockLength, (byte[])null, (ReversedLinesFileReader.ReversedLinesFileReader$1)null);\n+        this.currentFilePart = new ReversedLinesFileReader.FilePart(this, this.totalBlockCount, lastBlockLength, (byte[])null, (ReversedLinesFileReader.FilePart)null);\n     }\n     \n     @Deprecated\n     public ReversedLinesFileReader(final Path file, final int blockSize, final String charsetName) throws IOException {\n         this(file, blockSize, Charsets.toCharset(charsetName));\n     }\n     \n     @Override\n     public void close() throws IOException {\n         this.channel.close();\n     }\n     \n     public String readLine() throws IOException {\n         String line;\n-        for (line = ReversedLinesFileReader.FilePart.access$800(this.currentFilePart); line == null; line = ReversedLinesFileReader.FilePart.access$800(this.currentFilePart)) {\n-            this.currentFilePart = ReversedLinesFileReader.FilePart.access$900(this.currentFilePart);\n+        for (line = ReversedLinesFileReader.FilePart.access$1(this.currentFilePart); line == null; line = ReversedLinesFileReader.FilePart.access$1(this.currentFilePart)) {\n+            this.currentFilePart = ReversedLinesFileReader.FilePart.access$2(this.currentFilePart);\n             if (this.currentFilePart == null) {\n                 break;\n             }\n         }\n         if (\"\".equals(line) && !this.trailingNewlineOfFileSkipped) {\n             this.trailingNewlineOfFileSkipped = true;\n             line = this.readLine();\n@@ -141,14 +145,10 @@\n         }\n         return arrayList;\n     }\n     \n     public String toString(final int lineCount) throws IOException {\n         final List<String> lines = this.readLines(lineCount);\n         Collections.reverse(lines);\n-        return lines.isEmpty() ? \"\" : (String.join((CharSequence)System.lineSeparator(), (Iterable<? extends CharSequence>)lines) + System.lineSeparator());\n-    }\n-    \n-    static {\n-        DEFAULT_BLOCK_SIZE = FileSystem.getCurrent().getBlockSize();\n+        return lines.isEmpty() ? \"\" : (String.valueOf(String.join(System.lineSeparator(), lines)) + System.lineSeparator());\n     }\n }\n"}]}
