{"diffoscope-json-version": 1, "source1": "first/VFSFileSystem.class", "source2": "second/VFSFileSystem.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -1,17 +1,16 @@\n \n package org.apache.commons.configuration2.io;\n \n-import java.lang.reflect.Method;\n import java.util.Iterator;\n import org.apache.commons.vfs2.FileSystemConfigBuilder;\n import java.util.Map;\n import java.net.MalformedURLException;\n-import java.net.URLStreamHandler;\n import org.apache.commons.configuration2.ex.ConfigurationRuntimeException;\n+import java.net.URLStreamHandler;\n import org.apache.commons.vfs2.FileName;\n import org.apache.commons.vfs2.provider.UriParser;\n import java.io.File;\n import org.apache.commons.vfs2.FileSystemManager;\n import java.io.OutputStream;\n import org.apache.commons.vfs2.FileContent;\n import org.apache.commons.vfs2.FileObject;\n@@ -31,208 +30,195 @@\n     \n     public VFSFileSystem() {\n         this.log = LogFactory.getLog((Class)this.getClass());\n     }\n     \n     public InputStream getInputStream(final URL url) throws ConfigurationException {\n         try {\n-            final FileSystemOptions opts = this.getOptions(url.getProtocol());\n-            final FileObject file = (opts == null) ? VFS.getManager().resolveFile(url.toString()) : VFS.getManager().resolveFile(url.toString(), opts);\n-            if (file.getType() != FileType.FILE) {\n+            final FileSystemOptions options = this.getOptions(url.getProtocol());\n+            final FileObject fileObject = (options == null) ? VFS.getManager().resolveFile(url.toString()) : VFS.getManager().resolveFile(url.toString(), options);\n+            if (fileObject.getType() != FileType.FILE) {\n                 throw new ConfigurationException(\"Cannot load a configuration from a directory\");\n             }\n-            final FileContent content = file.getContent();\n+            final FileContent content = fileObject.getContent();\n             if (content == null) {\n-                final String msg = \"Cannot access content of \" + file.getName().getFriendlyURI();\n-                throw new ConfigurationException(msg);\n+                throw new ConfigurationException(\"Cannot access content of \" + fileObject.getName().getFriendlyURI());\n             }\n             return content.getInputStream();\n         }\n-        catch (final FileSystemException fse) {\n-            final String msg2 = \"Unable to access \" + url.toString();\n-            throw new ConfigurationException(msg2, (Throwable)fse);\n+        catch (final FileSystemException ex) {\n+            throw new ConfigurationException(\"Unable to access \" + url.toString(), (Throwable)ex);\n         }\n     }\n     \n     public OutputStream getOutputStream(final URL url) throws ConfigurationException {\n         try {\n-            final FileSystemOptions opts = this.getOptions(url.getProtocol());\n-            final FileSystemManager fsManager = VFS.getManager();\n-            final FileObject file = (opts == null) ? fsManager.resolveFile(url.toString()) : fsManager.resolveFile(url.toString(), opts);\n-            if (file == null || file.getType() == FileType.FOLDER) {\n+            final FileSystemOptions options = this.getOptions(url.getProtocol());\n+            final FileSystemManager manager = VFS.getManager();\n+            final FileObject fileObject = (options == null) ? manager.resolveFile(url.toString()) : manager.resolveFile(url.toString(), options);\n+            if (fileObject == null || fileObject.getType() == FileType.FOLDER) {\n                 throw new ConfigurationException(\"Cannot save a configuration to a directory\");\n             }\n-            final FileContent content = file.getContent();\n+            final FileContent content = fileObject.getContent();\n             if (content == null) {\n                 throw new ConfigurationException(\"Cannot access content of \" + url);\n             }\n             return content.getOutputStream();\n         }\n-        catch (final FileSystemException fse) {\n-            throw new ConfigurationException(\"Unable to access \" + url, (Throwable)fse);\n+        catch (final FileSystemException ex) {\n+            throw new ConfigurationException(\"Unable to access \" + url, (Throwable)ex);\n         }\n     }\n     \n-    public String getPath(final File file, final URL url, final String basePath, final String fileName) {\n+    public String getPath(final File file, final URL url, final String s, final String s2) {\n         if (file != null) {\n-            return super.getPath(file, url, basePath, fileName);\n+            return super.getPath(file, url, s, s2);\n         }\n         try {\n-            final FileSystemManager fsManager = VFS.getManager();\n+            final FileSystemManager manager = VFS.getManager();\n             if (url != null) {\n-                final FileName name = fsManager.resolveURI(url.toString());\n-                if (name != null) {\n-                    return name.toString();\n+                final FileName resolveURI = manager.resolveURI(url.toString());\n+                if (resolveURI != null) {\n+                    return resolveURI.toString();\n                 }\n             }\n-            if (UriParser.extractScheme(fileName) != null) {\n-                return fileName;\n+            if (UriParser.extractScheme(s2) != null) {\n+                return s2;\n             }\n-            if (basePath != null) {\n-                final FileName base = fsManager.resolveURI(basePath);\n-                return fsManager.resolveName(base, fileName).getURI();\n+            if (s != null) {\n+                return manager.resolveName(manager.resolveURI(s), s2).getURI();\n             }\n-            final FileName name = fsManager.resolveURI(fileName);\n-            final FileName base2 = name.getParent();\n-            return fsManager.resolveName(base2, name.getBaseName()).getURI();\n+            final FileName resolveURI2 = manager.resolveURI(s2);\n+            return manager.resolveName(resolveURI2.getParent(), resolveURI2.getBaseName()).getURI();\n         }\n-        catch (final FileSystemException fse) {\n-            fse.printStackTrace();\n+        catch (final FileSystemException ex) {\n+            ex.printStackTrace();\n             return null;\n         }\n     }\n     \n-    public String getBasePath(final String path) {\n-        if (UriParser.extractScheme(path) == null) {\n-            return super.getBasePath(path);\n+    public String getBasePath(final String s) {\n+        if (UriParser.extractScheme(s) == null) {\n+            return super.getBasePath(s);\n         }\n         try {\n-            final FileSystemManager fsManager = VFS.getManager();\n-            final FileName name = fsManager.resolveURI(path);\n-            return name.getParent().getURI();\n+            return VFS.getManager().resolveURI(s).getParent().getURI();\n         }\n-        catch (final FileSystemException fse) {\n-            fse.printStackTrace();\n+        catch (final FileSystemException ex) {\n+            ex.printStackTrace();\n             return null;\n         }\n     }\n     \n-    public String getFileName(final String path) {\n-        if (UriParser.extractScheme(path) == null) {\n-            return super.getFileName(path);\n+    public String getFileName(final String s) {\n+        if (UriParser.extractScheme(s) == null) {\n+            return super.getFileName(s);\n         }\n         try {\n-            final FileSystemManager fsManager = VFS.getManager();\n-            final FileName name = fsManager.resolveURI(path);\n-            return name.getBaseName();\n+            return VFS.getManager().resolveURI(s).getBaseName();\n         }\n-        catch (final FileSystemException fse) {\n-            fse.printStackTrace();\n+        catch (final FileSystemException ex) {\n+            ex.printStackTrace();\n             return null;\n         }\n     }\n     \n-    public URL getURL(final String basePath, final String file) throws MalformedURLException {\n-        if ((basePath != null && UriParser.extractScheme(basePath) == null) || (basePath == null && UriParser.extractScheme(file) == null)) {\n-            return super.getURL(basePath, file);\n+    public URL getURL(final String str, final String str2) throws MalformedURLException {\n+        if ((str != null && UriParser.extractScheme(str) == null) || (str == null && UriParser.extractScheme(str2) == null)) {\n+            return super.getURL(str, str2);\n         }\n         try {\n-            final FileSystemManager fsManager = VFS.getManager();\n-            FileName path;\n-            if (basePath != null && UriParser.extractScheme(file) == null) {\n-                final FileName base = fsManager.resolveURI(basePath);\n-                path = fsManager.resolveName(base, file);\n+            final FileSystemManager manager = VFS.getManager();\n+            FileName fileName;\n+            if (str != null && UriParser.extractScheme(str2) == null) {\n+                fileName = manager.resolveName(manager.resolveURI(str), str2);\n             }\n             else {\n-                path = fsManager.resolveURI(file);\n+                fileName = manager.resolveURI(str2);\n             }\n-            final URLStreamHandler handler = (URLStreamHandler)new VFSFileSystem.VFSURLStreamHandler(path);\n-            return new URL(null, path.getURI(), handler);\n+            return new URL(null, fileName.getURI(), (URLStreamHandler)new VFSFileSystem.VFSURLStreamHandler(fileName));\n         }\n-        catch (final FileSystemException fse) {\n-            throw new ConfigurationRuntimeException(\"Could not parse basePath: \" + basePath + \" and fileName: \" + file, (Throwable)fse);\n+        catch (final FileSystemException ex) {\n+            throw new ConfigurationRuntimeException(\"Could not parse basePath: \" + str + \" and fileName: \" + str2, (Throwable)ex);\n         }\n     }\n     \n-    public URL locateFromURL(final String basePath, final String fileName) {\n-        final String fileScheme = UriParser.extractScheme(fileName);\n-        if ((basePath == null || UriParser.extractScheme(basePath) == null) && fileScheme == null) {\n-            return super.locateFromURL(basePath, fileName);\n+    public URL locateFromURL(final String s, final String s2) {\n+        final String scheme = UriParser.extractScheme(s2);\n+        if ((s == null || UriParser.extractScheme(s) == null) && scheme == null) {\n+            return super.locateFromURL(s, s2);\n         }\n         try {\n-            final FileSystemManager fsManager = VFS.getManager();\n-            FileObject file;\n-            if (basePath != null && fileScheme == null) {\n-                final String scheme = UriParser.extractScheme(basePath);\n-                final FileSystemOptions opts = (scheme != null) ? this.getOptions(scheme) : null;\n-                FileObject base = (opts == null) ? fsManager.resolveFile(basePath) : fsManager.resolveFile(basePath, opts);\n-                if (base.getType() == FileType.FILE) {\n-                    base = base.getParent();\n+            final FileSystemManager manager = VFS.getManager();\n+            FileObject resolveFile;\n+            if (s != null && scheme == null) {\n+                final String scheme2 = UriParser.extractScheme(s);\n+                final FileSystemOptions fileSystemOptions = (scheme2 != null) ? this.getOptions(scheme2) : null;\n+                FileObject parent = (fileSystemOptions == null) ? manager.resolveFile(s) : manager.resolveFile(s, fileSystemOptions);\n+                if (parent.getType() == FileType.FILE) {\n+                    parent = parent.getParent();\n                 }\n-                file = fsManager.resolveFile(base, fileName);\n+                resolveFile = manager.resolveFile(parent, s2);\n             }\n             else {\n-                final FileSystemOptions opts2 = (fileScheme != null) ? this.getOptions(fileScheme) : null;\n-                file = ((opts2 == null) ? fsManager.resolveFile(fileName) : fsManager.resolveFile(fileName, opts2));\n+                final FileSystemOptions fileSystemOptions2 = (scheme != null) ? this.getOptions(scheme) : null;\n+                resolveFile = ((fileSystemOptions2 == null) ? manager.resolveFile(s2) : manager.resolveFile(s2, fileSystemOptions2));\n             }\n-            if (!file.exists()) {\n+            if (!resolveFile.exists()) {\n                 return null;\n             }\n-            final FileName path = file.getName();\n-            final URLStreamHandler handler = (URLStreamHandler)new VFSFileSystem.VFSURLStreamHandler(path);\n-            return new URL(null, path.getURI(), handler);\n+            final FileName name = resolveFile.getName();\n+            return new URL(null, name.getURI(), (URLStreamHandler)new VFSFileSystem.VFSURLStreamHandler(name));\n         }\n-        catch (final FileSystemException fse) {\n+        catch (final FileSystemException ex) {\n             return null;\n         }\n-        catch (final MalformedURLException ex) {\n+        catch (final MalformedURLException ex2) {\n             return null;\n         }\n     }\n     \n-    private FileSystemOptions getOptions(final String scheme) {\n-        final FileSystemOptions opts = new FileSystemOptions();\n-        FileSystemConfigBuilder builder;\n+    private FileSystemOptions getOptions(final String s) {\n+        final FileSystemOptions fileSystemOptions = new FileSystemOptions();\n+        FileSystemConfigBuilder fileSystemConfigBuilder;\n         try {\n-            builder = VFS.getManager().getFileSystemConfigBuilder(scheme);\n+            fileSystemConfigBuilder = VFS.getManager().getFileSystemConfigBuilder(s);\n         }\n         catch (final Exception ex) {\n             return null;\n         }\n-        final FileOptionsProvider provider = this.getFileOptionsProvider();\n-        if (provider != null) {\n-            final Map<String, Object> map = provider.getOptions();\n-            if (map == null) {\n+        final FileOptionsProvider fileOptionsProvider = this.getFileOptionsProvider();\n+        if (fileOptionsProvider != null) {\n+            final Map options = fileOptionsProvider.getOptions();\n+            if (options == null) {\n                 return null;\n             }\n-            int count = 0;\n-            for (final Map.Entry<String, Object> entry : map.entrySet()) {\n+            int n = 0;\n+            for (final Map.Entry entry : options.entrySet()) {\n                 try {\n-                    String key = (String)entry.getKey();\n-                    if (\"currentUser\".equals(key)) {\n-                        key = \"creatorName\";\n+                    String anObject = (String)entry.getKey();\n+                    if (\"currentUser\".equals(anObject)) {\n+                        anObject = \"creatorName\";\n                     }\n-                    this.setProperty(builder, opts, key, entry.getValue());\n-                    ++count;\n+                    this.setProperty(fileSystemConfigBuilder, fileSystemOptions, anObject, entry.getValue());\n+                    ++n;\n                 }\n                 catch (final Exception ex2) {}\n             }\n-            if (count > 0) {\n-                return opts;\n+            if (n > 0) {\n+                return fileSystemOptions;\n             }\n         }\n         return null;\n     }\n     \n-    private void setProperty(final FileSystemConfigBuilder builder, final FileSystemOptions options, final String key, final Object value) {\n-        final String methodName = \"set\" + key.substring(0, 1).toUpperCase() + key.substring(1);\n-        final Class<?>[] paramTypes = { FileSystemOptions.class, value.getClass() };\n-        try {\n-            final Method method = builder.getClass().getMethod(methodName, paramTypes);\n-            final Object[] params = { options, value };\n-            method.invoke(builder, params);\n+    private void setProperty(final FileSystemConfigBuilder obj, final FileSystemOptions fileSystemOptions, final String str, final Object o) {\n+        final String string = \"set\" + str.substring(0, 1).toUpperCase() + str.substring(1);\n+        final Class[] parameterTypes = { FileSystemOptions.class, o.getClass() };\n+        try {\n+            obj.getClass().getMethod(string, (Class<?>[])parameterTypes).invoke(obj, fileSystemOptions, o);\n         }\n         catch (final Exception ex) {\n-            this.log.warn((Object)(\"Cannot access property '\" + key + \"'! Ignoring.\"), (Throwable)ex);\n+            this.log.warn((Object)(\"Cannot access property '\" + str + \"'! Ignoring.\"), (Throwable)ex);\n         }\n     }\n }\n"}]}
