{"diffoscope-json-version": 1, "source1": "first/ListDelimiterHandler.class", "source2": "second/ListDelimiterHandler.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -28,16 +28,24 @@\n             AbstractListDelimiterHandler.flattenIterator(this, (Collection)result, (Iterator)((Iterable)value).iterator(), limit);\n         }\n         else if (value instanceof Iterator) {\n             AbstractListDelimiterHandler.flattenIterator(this, (Collection)result, (Iterator)value, limit);\n         }\n         else if (value != null) {\n             if (value.getClass().isArray()) {\n-                for (int len = Array.getLength(value), idx = 0, size = 0; idx < len && size < limit; ++idx, size = result.size()) {\n+                final int len = Array.getLength(value);\n+                int idx = 0;\n+                int size = 0;\n+                while (idx < len) {\n+                    if (size >= limit) {\n+                        break;\n+                    }\n                     result.addAll(this.flatten(Array.get(value, idx), limit - size));\n+                    ++idx;\n+                    size = result.size();\n                 }\n             }\n             else {\n                 result.add(value);\n             }\n         }\n         return result;\n"}]}
