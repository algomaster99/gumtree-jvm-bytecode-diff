{"diffoscope-json-version": 1, "source1": "first/MagicNumberFileFilter.class", "source2": "second/MagicNumberFileFilter.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -61,29 +61,35 @@\n     \n     public boolean accept(final File file) {\n         if (file != null && file.isFile() && file.canRead()) {\n             try (final RandomAccessFile randomAccessFile = new RandomAccessFile(file, \"r\")) {\n                 final byte[] byteArray = IOUtils.byteArray(this.magicNumbers.length);\n                 randomAccessFile.seek(this.byteOffset);\n                 if (randomAccessFile.read(byteArray) != this.magicNumbers.length) {\n-                    return false;\n+                    final boolean b = false;\n+                    randomAccessFile.close();\n+                    return b;\n                 }\n                 return Arrays.equals(this.magicNumbers, byteArray);\n             }\n             catch (final IOException ex) {}\n         }\n         return false;\n     }\n     \n     public FileVisitResult accept(final Path path, final BasicFileAttributes basicFileAttributes) {\n         if (path != null && Files.isRegularFile(path, new LinkOption[0]) && Files.isReadable(path)) {\n             try (final FileChannel open = FileChannel.open(path, new OpenOption[0])) {\n                 final ByteBuffer allocate = ByteBuffer.allocate(this.magicNumbers.length);\n                 if (open.read(allocate) != this.magicNumbers.length) {\n-                    return FileVisitResult.TERMINATE;\n+                    final FileVisitResult terminate = FileVisitResult.TERMINATE;\n+                    if (open != null) {\n+                        open.close();\n+                    }\n+                    return terminate;\n                 }\n                 return toFileVisitResult(Arrays.equals(this.magicNumbers, allocate.array()), path);\n             }\n             catch (final IOException ex) {}\n         }\n         return FileVisitResult.TERMINATE;\n     }\n"}]}
