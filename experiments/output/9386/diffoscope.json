{"diffoscope-json-version": 1, "source1": "first/ScatterZipOutputStream.class", "source2": "second/ScatterZipOutputStream.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -45,28 +45,17 @@\n         this.items = new ConcurrentLinkedQueue<ScatterZipOutputStream.CompressedEntry>();\n         this.isClosed = new AtomicBoolean();\n         this.backingStore = backingStore;\n         this.streamCompressor = streamCompressor;\n     }\n     \n     public void addArchiveEntry(final ZipArchiveEntryRequest zipArchiveEntryRequest) throws IOException {\n-        final InputStream payloadStream = zipArchiveEntryRequest.getPayloadStream();\n-        Throwable x0 = null;\n-        try {\n+        try (final InputStream payloadStream = zipArchiveEntryRequest.getPayloadStream()) {\n             this.streamCompressor.deflate(payloadStream, zipArchiveEntryRequest.getMethod());\n         }\n-        catch (final Throwable t) {\n-            x0 = t;\n-            throw t;\n-        }\n-        finally {\n-            if (payloadStream != null) {\n-                $closeResource(x0, payloadStream);\n-            }\n-        }\n         this.items.add(new ScatterZipOutputStream.CompressedEntry(zipArchiveEntryRequest, this.streamCompressor.getCrc32(), this.streamCompressor.getBytesWrittenForLastEntry(), this.streamCompressor.getBytesRead()));\n     }\n     \n     @Override\n     public void close() throws IOException {\n         if (!this.isClosed.compareAndSet(false, true)) {\n             return;\n@@ -80,57 +69,23 @@\n         finally {\n             this.streamCompressor.close();\n         }\n     }\n     \n     public void writeTo(final ZipArchiveOutputStream target) throws IOException {\n         this.backingStore.closeForWriting();\n-        final InputStream data = this.backingStore.getInputStream();\n-        Throwable x0 = null;\n-        try {\n+        try (final InputStream data = this.backingStore.getInputStream()) {\n             for (final ScatterZipOutputStream.CompressedEntry compressedEntry : this.items) {\n-                final BoundedInputStream rawStream = new BoundedInputStream(data, compressedEntry.compressedSize);\n-                Throwable x2 = null;\n-                try {\n+                try (final BoundedInputStream rawStream = new BoundedInputStream(data, compressedEntry.compressedSize)) {\n                     target.addRawArchiveEntry(compressedEntry.transferToArchiveEntry(), (InputStream)rawStream);\n                 }\n-                catch (final Throwable t) {\n-                    x2 = t;\n-                    throw t;\n-                }\n-                finally {\n-                    $closeResource(x2, (AutoCloseable)rawStream);\n-                }\n-            }\n-        }\n-        catch (final Throwable t2) {\n-            x0 = t2;\n-            throw t2;\n-        }\n-        finally {\n-            if (data != null) {\n-                $closeResource(x0, data);\n             }\n         }\n     }\n     \n     public ScatterZipOutputStream.ZipEntryWriter zipEntryWriter() throws IOException {\n         if (this.zipEntryWriter == null) {\n             this.zipEntryWriter = new ScatterZipOutputStream.ZipEntryWriter(this);\n         }\n         return this.zipEntryWriter;\n     }\n-    \n-    private static /* synthetic */ void $closeResource(final Throwable x0, final AutoCloseable x1) {\n-        if (x0 != null) {\n-            try {\n-                x1.close();\n-            }\n-            catch (final Throwable exception) {\n-                x0.addSuppressed(exception);\n-            }\n-        }\n-        else {\n-            x1.close();\n-        }\n-    }\n }\n"}]}
