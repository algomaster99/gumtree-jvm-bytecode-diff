{"diffoscope-json-version": 1, "source1": "first/FramedLZ4CompressorInputStream.class", "source2": "second/FramedLZ4CompressorInputStream.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -35,14 +35,19 @@\n     private InputStream currentBlock;\n     private boolean endReached;\n     private boolean inUncompressed;\n     private final XXHash32 contentHash;\n     private final XXHash32 blockHash;\n     private byte[] blockDependencyBuffer;\n     \n+    static {\n+        LZ4_SIGNATURE = new byte[] { 4, 34, 77, 24 };\n+        SKIPPABLE_FRAME_TRAILER = new byte[] { 42, 77, 24 };\n+    }\n+    \n     public FramedLZ4CompressorInputStream(final InputStream in) throws IOException {\n         this(in, false);\n     }\n     \n     public FramedLZ4CompressorInputStream(final InputStream in, final boolean decompressConcatenated) throws IOException {\n         this.oneByte = new byte[1];\n         this.supplier = (ByteUtils.ByteSupplier)new FramedLZ4CompressorInputStream.FramedLZ4CompressorInputStream$1(this);\n@@ -95,23 +100,23 @@\n     }\n     \n     private boolean readSignature(final boolean firstFrame) throws IOException {\n         final String garbageMessage = firstFrame ? \"Not a LZ4 frame stream\" : \"LZ4 frame stream followed by garbage\";\n         final byte[] b = new byte[4];\n         int read = IOUtils.readFully(this.in, b);\n         this.count(read);\n-        if (0 == read && !firstFrame) {\n+        if (read == 0 && !firstFrame) {\n             this.endReached = true;\n             return false;\n         }\n         if (4 != read) {\n             throw new IOException(garbageMessage);\n         }\n         read = this.skipSkippableFrame(b);\n-        if (0 == read && !firstFrame) {\n+        if (read == 0 && !firstFrame) {\n             this.endReached = true;\n             return false;\n         }\n         if (4 != read || !matches(b, 4)) {\n             throw new IOException(garbageMessage);\n         }\n         return true;\n@@ -219,15 +224,15 @@\n         final int read = IOUtils.readFully(this.in, checksum);\n         this.count(read);\n         if (4 != read) {\n             throw new IOException(\"Premature end of stream while reading \" + kind + \" checksum\");\n         }\n         final long expectedHash = hash.getValue();\n         if (expectedHash != ByteUtils.fromLittleEndian(checksum)) {\n-            throw new IOException(kind + \" checksum mismatch.\");\n+            throw new IOException(String.valueOf(kind) + \" checksum mismatch.\");\n         }\n     }\n     \n     private int readOneByte() throws IOException {\n         final int b = this.in.read();\n         if (b != -1) {\n             this.count(1);\n@@ -294,13 +299,8 @@\n         byte[] shortenedSig = signature;\n         if (signature.length > FramedLZ4CompressorInputStream.LZ4_SIGNATURE.length) {\n             shortenedSig = new byte[FramedLZ4CompressorInputStream.LZ4_SIGNATURE.length];\n             System.arraycopy(signature, 0, shortenedSig, 0, FramedLZ4CompressorInputStream.LZ4_SIGNATURE.length);\n         }\n         return Arrays.equals(shortenedSig, FramedLZ4CompressorInputStream.LZ4_SIGNATURE);\n     }\n-    \n-    static {\n-        LZ4_SIGNATURE = new byte[] { 4, 34, 77, 24 };\n-        SKIPPABLE_FRAME_TRAILER = new byte[] { 42, 77, 24 };\n-    }\n }\n"}]}
