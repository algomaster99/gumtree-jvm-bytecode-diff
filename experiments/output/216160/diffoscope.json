{"diffoscope-json-version": 1, "source1": "first/ModularRuntimeImage.class", "source2": "second/ModularRuntimeImage.class", "unified_diff": null, "details": [{"source1": "procyon -ec {}", "source2": "procyon -ec {}", "unified_diff": "@@ -4,19 +4,19 @@\n import java.io.File;\n import java.nio.file.DirectoryStream;\n import java.util.function.Consumer;\n import java.util.Objects;\n import java.nio.file.Files;\n import java.util.ArrayList;\n import java.util.List;\n-import java.io.IOException;\n import java.nio.file.Path;\n+import java.io.IOException;\n import java.util.Map;\n-import java.net.URL;\n import java.nio.file.Paths;\n+import java.net.URL;\n import java.util.Collections;\n import java.nio.file.FileSystems;\n import java.net.URI;\n import java.nio.file.FileSystem;\n import java.net.URLClassLoader;\n import java.io.Closeable;\n \n@@ -27,25 +27,23 @@\n     private final URLClassLoader classLoader;\n     private final FileSystem fileSystem;\n     \n     public ModularRuntimeImage() {\n         this(null, FileSystems.getFileSystem(URI.create(\"jrt:/\")));\n     }\n     \n-    public ModularRuntimeImage(final String javaHome) throws IOException {\n-        final Map<String, ?> emptyMap = Collections.emptyMap();\n-        final Path jrePath = Paths.get(javaHome, new String[0]);\n-        final Path jrtFsPath = jrePath.resolve(\"lib\").resolve(\"jrt-fs.jar\");\n-        this.classLoader = URLClassLoader.newInstance(new URL[] { jrtFsPath.toUri().toURL() });\n-        this.fileSystem = FileSystems.newFileSystem(URI.create(\"jrt:/\"), emptyMap, this.classLoader);\n+    public ModularRuntimeImage(final String first) throws IOException {\n+        final Map<Object, Object> emptyMap = (Map<Object, Object>)Collections.emptyMap();\n+        this.classLoader = URLClassLoader.newInstance(new URL[] { Paths.get(first, new String[0]).resolve(\"lib\").resolve(\"jrt-fs.jar\").toUri().toURL() });\n+        this.fileSystem = FileSystems.newFileSystem(URI.create(\"jrt:/\"), emptyMap, (ClassLoader)this.classLoader);\n     }\n     \n-    private ModularRuntimeImage(final URLClassLoader cl, final FileSystem fs) {\n-        this.classLoader = cl;\n-        this.fileSystem = fs;\n+    private ModularRuntimeImage(final URLClassLoader classLoader, final FileSystem fileSystem) {\n+        this.classLoader = classLoader;\n+        this.fileSystem = fileSystem;\n     }\n     \n     @Override\n     public void close() throws IOException {\n         if (this.classLoader != null) {\n             this.classLoader.close();\n         }\n@@ -54,27 +52,27 @@\n         }\n     }\n     \n     public FileSystem getFileSystem() {\n         return this.fileSystem;\n     }\n     \n-    public List<Path> list(final Path dirPath) throws IOException {\n-        final List<Path> list = new ArrayList<Path>();\n-        try (final DirectoryStream<Path> ds = Files.newDirectoryStream(dirPath)) {\n-            final DirectoryStream<Path> directoryStream = ds;\n-            final List<Path> obj = list;\n-            Objects.requireNonNull((ArrayList)obj);\n-            directoryStream.forEach(obj::add);\n+    public List<Path> list(final Path dir) throws IOException {\n+        final ArrayList list = new ArrayList();\n+        try (final DirectoryStream<Path> directoryStream = Files.newDirectoryStream(dir)) {\n+            final DirectoryStream<Path> directoryStream2 = directoryStream;\n+            final ArrayList obj = list;\n+            Objects.requireNonNull(obj);\n+            directoryStream2.forEach(obj::add);\n         }\n         return list;\n     }\n     \n-    public List<Path> list(final String dirName) throws IOException {\n-        return this.list(this.fileSystem.getPath(dirName, new String[0]));\n+    public List<Path> list(final String s) throws IOException {\n+        return this.list(this.fileSystem.getPath(s, new String[0]));\n     }\n     \n     public List<Path> modules() throws IOException {\n         return this.list(ModularRuntimeImage.MODULES_PATH);\n     }\n     \n     public List<Path> packages() throws IOException {\n"}]}
